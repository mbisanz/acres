"use strict";angular.module("acres",["ngAnimate","ngResource","ngRoute"]).constant("version","v0.1.0").config(["$locationProvider","$routeProvider","$httpProvider",function(a,b){a.html5Mode(!1),b.when("/",{templateUrl:"views/home.html"}).when("/aircrafts",{templateUrl:"views/aircrafts.html",controller:"AircraftCtrl"}).when("/bookings",{templateUrl:"views/bookings.html",controller:"BookingCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("acres").controller("MainCtrl",["$scope","$location","version","showcaseService",function(a,b,c,d){a.$path=b.path.bind(b),a.version=c,a.resetShowcase=function(){d.save()}}]),angular.module("acres").controller("AircraftCtrl",["$scope","aircraftService","reservationService",function(a,b,c){a.updateAircraftList=function(){b.query(function(b){a.aircrafts=b,a.reservations=null,a.showReservations=!1},function(){alert("Failed to load aircraft list!")})},a.loadAircraftReservations=function(b){c.query({registration:b.registration},function(b){a.reservations=b,a.showReservations=!0},function(){alert("Failed to load bookings list!")})},a.updateAircraftList()}]),angular.module("acres").controller("BookingCtrl",["$scope","reservationWorkflowService",function(a,b){a.loadReservationList=function(){b.query(function(b){a.reservations=b},function(){alert("Failed to load bookings list!")})},a.cancelReservation=function(c){b.remove({resId:c.id},function(){a.loadReservationList()},function(){alert("Failed to cancel booking!")})},a.updateReservation=function(c){b.update({resId:c.id},function(){a.loadReservationList()},function(){alert("Failed to update booking!")})},a.loadReservationList()}]);var baseUrl="/acres-rest/rest";angular.module("acres").factory("aircraftService",["$resource",function(a){return a(baseUrl+"/ac/:acId",{acId:"@acId"},{update:{method:"PUT"}})}]).factory("reservationService",["$resource",function(a){return a(baseUrl+"/res/:resId",{resId:"@resId"},{update:{method:"PUT"},query:{method:"GET",url:baseUrl+"/res/search",isArray:!0}})}]).factory("reservationWorkflowService",["$resource",function(a){return a(baseUrl+"/reswf/:resId",{resId:"@resId"},{update:{method:"PUT"}})}]).factory("showcaseService",["$resource",function(a){return a(baseUrl+"/showcase")}]);